## ğŸ“ HÆ°á»›ng dáº«n host server Minecraft trá»±c tiáº¿p trÃªn mÃ¡y tÃ­nh chi tiáº¿t nháº¥t cÃ³ thá»ƒ.
Trong bÃ i viáº¿t nÃ y mÃ¬nh sáº½ hÆ°á»›ng dáº«n cÃ¡c báº¡n host server Minecraft trá»±c tiáº¿p trÃªn mÃ¡y tÃ­nh cá»§a cÃ¡c báº¡n.

**ChÃº Ã½: táº¥t cáº£ kiáº¿n thá»©c dÆ°á»›i Ä‘Ã¢y lÃ  kinh nghiá»‡m cá»§a cÃ¡ nhÃ¢n mÃ¬nh, nÃªn cÃ³ thá»ƒ sáº½ cÃ³ sai sÃ³t, náº¿u cÃ³ Ã½ kiáº¿n Ä‘Ã³ng gÃ³p, vui lÃ²ng liÃªn há»‡ vá»›i mÃ¬nh Ä‘á»ƒ mÃ¬nh hoÃ n thiá»‡n hÆ°á»›ng dáº«n nÃ y hÆ¡n, xin cáº£m Æ¡n.**

**ThÃ´ng tin liÃªn há»‡ vui lÃ²ng xem cuá»‘i bÃ i viáº¿t.**

Äáº§u tiÃªn Ä‘á»ƒ host Ä‘Æ°á»£c server Minecraft trÃªn mÃ¡y tÃ­nh, cáº¥u hÃ¬nh mÃ¡y tÃ­nh cá»§a báº¡n cáº§n tá»‘i thiá»ƒu nhÆ° sau:
- CPU: tá»‘i thiá»ƒu 2 nhÃ¢n trá»Ÿ lÃªn.
- Ram: tá»‘i thiá»ƒu 8GB trá»Ÿ lÃªn.

### ğŸ§° CÃ´ng cá»¥, pháº§n má»m cáº§n thiáº¿t:
- Java JDK **(x64 Installer hoáº·c X64 MSI Installer)**: https://www.oracle.com/java/technologies/downloads/#java20
- Notepad++: https://notepad-plus-plus.org/

### ğŸ“Œ Má»Ÿ port:
_Hiá»ƒu Ä‘Æ¡n giáº£n, port giá»‘ng nhÆ° cÃ¡nh cá»•ng cÃ³ quyá»n cho vÃ o hay khÃ´ng vá»›i cÃ¡c dá»¯ liá»‡u muá»‘n ra vÃ o há»‡ thá»‘ng mÃ¡y tÃ­nh cá»§a báº¡n. Náº¿u báº¡n khÃ´ng má»Ÿ port, ngÆ°á»i khÃ¡c sáº½ khÃ´ng thá»ƒ tham gia vÃ o mÃ¡y chá»§ cá»§a báº¡n._
- Port máº·c Ä‘á»‹nh cá»§a Minecraft: **25565**

VÃ¬ má»Ÿ port yÃªu cáº§u cáº§n truy cáº­p vÃ o modem, vÃ  cÃ³ ráº¥t nhiá»u loáº¡i modem + nhÃ  máº¡ng khÃ¡c nhau nÃªn mÃ¬nh sáº½ khÃ´ng hÆ°á»›ng dáº«n cá»¥ thá»ƒ á»Ÿ Ä‘Ã¢y, cÃ¡c báº¡n cÃ³ thá»ƒ tham kháº£o trÃªn cÃ¡c trang máº¡ng hÆ°á»›ng dáº«n Ä‘Ãºng vá»›i modem vÃ  nhÃ  máº¡ng Ä‘ang dÃ¹ng, náº¿u báº¡n khÃ´ng biáº¿t cÃ¡ch má»Ÿ, vui lÃ²ng liÃªn há»‡ vá»›i mÃ¬nh.

Hiá»‡n Ä‘uÃ´i file, xem pháº§n má»Ÿ rá»™ng file: https://quantrimang.com/cong-nghe/cach-hien-duoi-file-tren-windows-179704

### ğŸ—ƒï¸ XÃ¢y dá»±ng/táº£i file server:
**(*)** Táº£i vá» file server Paper, Purpur...(Náº¿u sá»­ dá»¥ng Spigot, vui lÃ²ng bá» qua bÆ°á»›c nÃ y):

- Paper: https://papermc.io/
- Purpur: https://purpurmc.org/
- Pufferfish: https://pufferfish.host/

XÃ¢y dá»±ng Spigot: (Náº¿u sá»­ dá»¥ng Paper, Purpur hoáº·c server khÃ¡c, vui lÃ²ng bá» qua bÆ°á»›c nÃ y):

- Táº£i **BuildTools** Ä‘á»ƒ xÃ¢y dá»±ng Spigot: https://hub.spigotmc.org/jenkins/job/BuildTools/

- Copy **BuildTools.jar** vá»«a táº£i vÃ o má»™t thÆ° má»¥c má»›i ngoÃ i desktop Ä‘á»ƒ dá»… lÃ m viá»‡c.

- CÅ©ng trong thÆ° má»¥c trÃªn, táº¡o má»™t file **Text Document** vá»›i tÃªn báº¥t ká»³ vá»›i Ä‘uÃ´i má»Ÿ rá»™ng lÃ  **.bat**, vÃ­ dá»¥ _**Run.bat**_.

áº¤n chuá»™t pháº£i vÃ o file **Run.bat**, chá»n _Edit with Notepad++_, sao chÃ©p vÃ  dÃ¡n Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y vÃ o rá»“i lÆ°u láº¡i:

```bat
java -jar BuildTools.jar --rev latest
```

Máº·c Ä‘á»‹nh **BuildTools** sáº½ táº¡o Spigot phiÃªn báº£n á»•n Ä‘á»‹nh má»›i nháº¥t.

Náº¿u muá»‘n táº¡o phiÃªn báº£n cÅ©, thay `latest` báº±ng sá»‘ phiÃªn báº£n tÆ°Æ¡ng á»©ng. VÃ­ dá»¥: `1.19.4`, `1.19.2`...

- Nháº¥p Ä‘Ãºp file **Run.bat** Ä‘á»ƒ báº¯t Ä‘áº§u quÃ¡ trÃ¬nh xÃ¢y dá»±ng Spigot, Vui lÃ²ng chá» Ä‘á»£i.
- Sau khi hoÃ n thÃ nh, bÃªn trong thÆ° má»¥c sáº½ xuáº¥t hiá»‡n má»™t file **Spigot-x.x.xjar** vá»›i `x.x.x` lÃ  sá»‘ phiÃªn báº£n mÃ  báº¡n Ä‘Ã£ xÃ¢y dá»±ng.

### ğŸš§ Chuáº©n bá»‹ server:

- Copy file server Ä‘Ã£ xÃ¢y dá»±ng hoáº·c táº£i **(*)** vÃ o má»™t thÆ° má»¥c má»›i ngoÃ i desktop.
- Trong thÆ° má»¥c trÃªn, táº¡o má»™t file **Text Document** vá»›i tÃªn báº¥t ká»³ vá»›i Ä‘uÃ´i má»Ÿ rá»™ng lÃ  **.bat**, vÃ­ dá»¥ _**Start.bat**_.

> (File Start.bat nÃ y lÃ  file khá»Ÿi Ä‘á»™ng server).

- áº¤n chuá»™t pháº£i vÃ o file **Start.bat**, chá»n _Edit with Notepad++_, sao chÃ©p vÃ  dÃ¡n Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y vÃ o rá»“i lÆ°u láº¡i:
 ```bat
java -Xms2G -Xmx2G -XX:+UseG1GC -jar xxx.jar nogui
```

`XmsXG`: vá»›i `X` lÃ  dung lÆ°á»£ng ram tá»‘i thiá»ƒu báº¡n muá»‘n cho server.

`XmxYG`: vá»›i `Y` lÃ  dung lÆ°á»£ng ram tá»‘i Ä‘a báº¡n muá»‘n cho server.

`xxx.jar`: lÃ  tÃªn file server cá»§a báº¡n.

- Tiáº¿p tá»¥c táº¡o má»™t file **Text Document** vá»›i tÃªn báº¯t buá»™c lÃ  **eula.txt**.
Nháº¥n Ä‘Ãºp Ä‘á»ƒ má»Ÿ file **eula.txt**, sao chÃ©p vÃ  dÃ¡n Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y vÃ o rá»“i lÆ°u láº¡i:
`eula=true`

> (EULA lÃ  End User License Agreement, cÃ³ nghÄ©a Thá»a thuáº­n Giáº¥y phÃ©p ngÆ°á»i dÃ¹ng cuá»‘i, Thá»a thuáº­n sá»­ dá»¥ng sáº£n pháº©m, Äiá»u kiá»‡n sá»­ dá»¥ng, Äiá»u khoáº£n Cáº¥p phÃ©p Pháº§n má»m)

![image](https://github.com/onionchibi/minecraft-server-guild/assets/86107757/3f46d5d3-619b-42b8-9a99-195967aef1be)


- Nháº¥p Ä‘Ãºp file **Start.bat** Ä‘á»ƒ báº¯t Ä‘áº§u quÃ¡ trÃ¬nh khá»Ÿi Ä‘á»™ng server. Vui lÃ²ng chá» Ä‘á»£i,
- Server hoÃ n thÃ nh khá»Ÿi Ä‘á»™ng sáº½ cÃ³ dÃ²ng chá»¯:
`Done (xxxS)! For help, type "help"`
- GÃµ **stop** Ä‘á»ƒ táº¯t server.

> (ChÃº Ã½, tuyá»‡t Ä‘á»‘i khÃ´ng táº¯t server báº±ng cÃ¡ch áº¥n X vÃ o gÃ³c trÃªn bÃªn pháº£i báº£ng console, hÃ£y dÃ¹ng lá»‡nh stop vÃ  Ä‘á»£i cho server Ä‘Ã³ng hoÃ n toÃ n).

### âš™ï¸ Chá»‰nh sá»­a server:
- CÃ³ 2 giÃ¡ trá»‹ cáº§n nhá»›:
`true` = Ä‘Ãºng
`false` = sai

**_level-seed=_**: seed cá»§a tháº¿ giá»›i, náº¿u báº¡n muá»‘n táº¡o tháº¿ giá»›i báº±ng seed, hÃ£y nháº­p seed vÃ o Ä‘Ã¢y, náº¿u Ä‘Ã£ cÃ³ tháº¿ giá»›i cÅ© trÆ°á»›c Ä‘Ã³, báº¡n hÃ£y xoÃ¡ 3 thÆ° má»¥c: `world`, `world_nether`, `world_the_end` vÃ  khá»Ÿi Ä‘á»™ng láº¡i server Ä‘á»ƒ táº¡o tháº¿ giá»›i má»›i theo seed báº¡n Ä‘Ã£ cÃ i Ä‘áº·t.

**_gamemode=_**: cháº¿ Ä‘á»™ game: `survival` (sinh tá»“n), `creative` (sÃ¡ng táº¡o), `adventure` (phiÃªu lÆ°u), `spectator` (theo dÃµi).

**_motd=_**: tÃªn server cá»§a báº¡n, sáº½ hiá»ƒn thá»‹ khi ngÆ°á»i chÆ¡i thÃªm server cá»§a báº¡n vÃ o danh sÃ¡ch server cá»§a há».

**_pvp=_**: cho phÃ©p Ä‘Ã¡nh nhau.

**_generate-structures=_**: kiáº¿n táº¡o cÃ¡c kiáº¿n trÃºc trong tháº¿ giá»›i (lÃ ngâ€¦).

**_difficulty=_**: Ä‘á»™ khÃ³. `peaceful` (bÃ¬nh yÃªn), `easy` (dá»…), `medium` (trung bÃ¬nh), `hard` (khÃ³).

**_max-players=_**: cÃ i Ä‘áº·t giá»›i háº¡n sá»‘ ngÆ°á»i cÃ³ thá»ƒ tham gia mÃ¡y chá»§.

**_online-mode=_**: `true`: chá»‰ cÃ³ ngÆ°á»i chÆ¡i minecraft báº£n quyá»n má»›i cÃ³ thá»ƒ tham gia mÃ¡y chá»§ cá»§a báº¡n.

**_sync-chunk-writes=_**: chá»‰nh `true` thÃ nh `false`.

**_hardcore=_**: cháº¿ Ä‘á»™ chÆ¡i siÃªu khÃ³, cháº¿t khÃ´ng há»“i sinh.

**_level-type=_**:
     `minecraft\:normal`: lÃ  loáº¡i tháº¿ giá»›i máº·c Ä‘á»‹nh.
      `flat`: tháº¿ giá»›i siÃªu pháº³ng.

### ** ğŸŒ Káº¿t ná»‘i server:**

- Báº¡n cÃ³ thá»ƒ káº¿t ná»‘i tá»›i server cá»§a chÃ­nh mÃ¬nh báº±ng IP: `localhost`
- CÃ¡c báº¡n cáº§n Public IP Ä‘á»ƒ ngÆ°á»i khÃ¡c cÃ³ thá»ƒ káº¿t ná»‘i tá»›i server cá»§a báº¡n:

VÃ o link sau: https://www.whatismyip.com/

**My Public IPv4** chÃ­nh lÃ  IP Ä‘á»ƒ cho ngÆ°á»i khÃ¡c cÃ³ thá»ƒ tham gia vÃ o mÃ¡y chá»§ cá»§a báº¡n.

- LÆ°u Ã½: Má»—i láº§n báº¡n rÃºt Ä‘iá»‡n modem, Public IPv4 sáº½ bá»‹ thay Ä‘á»•i.

## ğŸ³ CÃ¡ch má»Ÿ server báº³ng Docker (Herta-Chan)

### BÆ°á»›c 1: CÃ i Docker
- Äá»‘i vá»›i MacOS / Window: https://www.docker.com
- Äá»‘i vá»›i Linux:
```
Arch:
1. sudo pacman -S docker
2. sudo systemctl start docker.service
3. sudo systemctl enable docker.service
4. sudo usermod -aG docker $USER
```

```Debian
1. sudo apt install docker.io -y
```

```Ubuntu
1. sudo snap install docker / sudo apt install docker.io -y
```

### BÆ°á»›c 2: Setup 
- Khi cÃ i xong docker thÃ¬ hÃ£y táº¡o file tÃªn .env vÃ  paste code nÃ y vÃ o Ä‘Ã³
```env
CONTAINER_NAME=
RAM_AMOUNT=
```
- Khi cÃ i xong docker thÃ¬ hÃ£y táº¡o file tÃªn docker-compose.yml vÃ  paste code nÃ y vÃ o Ä‘Ã³
```docker-compose.yml
version: "3"

services: 
    minecraft-server:
        build:
            context: .
            args:
                RAM_AMOUNT: ${RAM_AMOUNT}
        volumes:
            - .server-data:/server
        ports:
            - 25565:25565
        container_name: ${CONTAINER_NAME}

volumes:
    server-data:
```

- Sau khi táº¡o file docker-compose.yml thÃ¬ hÃ£y táº¡o file Dockerfile vÃ  paste dÃ²ng code nÃ y
```Dockerfile
FROM openjdk:16-jdk-alpine

ARG RAM_AMOUNT

ENV ram=${RAM_AMOUNT}

WORKDIR /server

CMD echo "Server Startá»‹ng \n" && java -Xms${ram} -Xmx${ram} --add-modules=jdk.incubator.vector -jar paper-1.16.5-794.jar
```

- Sau khi hoÃ n thÃ nh báº¡n hÃ£y kÃ©o lÃªn trÃªn Ä‘á»ƒ xem hÆ°á»›ng dáº«n nhÃ©

## âš ï¸ LÆ°u Ã½: 
### Trong file .env CONTAINER_NAME báº¡n cÃ³ thá»ƒ nháº­p bá»«a vÃ¬ nÃ³ khÃ´ng áº£nh hÆ°á»Ÿng gÃ¬ máº¥y
### Trong file .env RAM_AMOUNT chá»‰ cho sá»‘ RAM báº¡n dÃ¹ng Ä‘á»ƒ má»Ÿ server (VÃ­ dá»¥: Cáº¥u hÃ¬nh mÃ¡y lÃ  64GB RAM báº¡n muá»‘n má»Ÿ 32GB RAM thÃ¬ ghi 32768M / 32G / 32000M
### Trong file docker-compose.yml náº¿u server báº¡n má»Ÿ thÃªm cho ngÆ°á»i dÃ¹ng BE (Bugrock Edition) thÃ¬ hÃ£y thÃªm vÃ o má»¥c ports
```
- 19132:19132
```
### Trong file Dockerfile openjdk:16-jdk-alpine Ä‘á»ƒ chá»‰ cho phiÃªn báº£n java báº¡n dÃ¹ng Ä‘á»ƒ má»Ÿ server. Náº¿u phiÃªn báº£n cá»§a báº¡n yÃªu cáº§u java 17 Ä‘á»• lÃªn thÃ¬ Ä‘á»Ÿi thÃ nh openjdk:17-jdk-alpine
### Trong file Dockerfile paper-1.16.5-794.jar Ä‘á»ƒ chá»‰ cho file server, báº¡n sáº½ pháº£i Ä‘á»•i Ä‘Ãºng vá»›i file báº¡n táº£i
### Náº¿u báº¡n chá»n dÃ¹ng docker thÃ¬ báº¡n khÃ´ng cáº§n cÃ i java nhÃ© 


## ğŸ·ï¸Tags
### NgoÃ i ra cÃ²n cÃ³ cÃ¡c loáº¡i Tags báº¡n cÃ³ thá»ƒ dÃ¹ng (tham kháº£o táº¡i [ÄÃ‚Y](https://flags.sh) )
```-XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=15 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 -Dusing.aikars.flags=https://mcflags.emc.gs -Daikars.new.flags=true -XX:G1NewSizePercent=30 -XX:G1MaxNewSizePercent=40 -XX:G1HeapRegionSize=8M -XX:G1ReservePercent=20 ```


### TrÃªn Ä‘Ã¢y lÃ  táº¥t cáº£ hÆ°á»›ng dáº«n cÆ¡ báº£n nháº¥t Ä‘á»ƒ táº¡o má»™t server Minecraft trá»±c tiáº¿p trÃªn mÃ¡y tÃ­nh cá»§a báº¡n.


Náº¿u cÃ³ tháº¯c máº¯c hoáº·c cáº§n giÃºp Ä‘á»¡, vui lÃ²ng liÃªn há»‡ mÃ¬nh theo Discord: **demoncard09** (cÆ¡ báº£n) vÃ  **_itzdenki** (há»— trá»£ docker)

Hoáº·c nháº¯n tin qua Facebook: https://www.facebook.com/truonglinhhanh/
